# 課題1 （質問）

## ◼️サードパーティクッキーとファーストパーティクッキーの違い
ファーストパーティークッキーはユーザーがアクセスしているサイトのドメインで発行されたクッキーであり、<br>
サードパーティークッキーはユーザーがアクセスしているサイトに表示された別サイトのバナー広告など、「別ドメインで発行されたクッキー」のことを指します。<br>


## ◼️サードパーティ Cookie を用いてどのようにユーザー情報を追尾しているか

Google adsense広告に含まれるサードパーティクッキーは、どのサイトに組み込まれているものか、ということがアドセンス側でわかります。<br>
加えてユーザーがサードパーティクッキーを受け入れる状態の場合、「このユーザーがこのサイトのサードパーティクッキーを利用した、ということもわかります。<br>
そのため複数のサイトA、B、C、、、など、多数のサイトにサードパーティクッキーを設定しておくことで、<br>
ユーザーがどのようなサイトにアクセスしているか、の行動履歴が認識できます。<br><br>

ユーザー1：車のサイトと、ゲームのサイトのサードパーティクッキーを利用した<br>
ユーザー2：服のサイトのサードパーティクッキーを利用した<br><br>
これらの情報がアドセンス側で把握できる、ということになります。<br>

## ◼️サードパーティクッキーの生成のされ方

facebookのいいねボタンやバナー広告など、専用のコンテンツをサイトに埋め込むケースがあります。<br>
ユーザーがサイトに組み込まれた広告を表示したり、クリックした時に、サードパーティクッキーの提供元のサーバーにリクエストが送られ、サードパーティクッキーが生成されます。<br><br>
参考：https://kimagureneet.hatenablog.com/entry/2016/02/11/104614<br>


## ◼️サードパーティクッキーのブラウザごとの扱い
safariは　導入済みのITP(Intelligent Tracking Prevention）により段階的に制限を強くしており、現在はデフォルトでサードパーティクッキーをブロックしています。<br>
frefoxでは新規ユーザーではデフォルトでブロックされており、既存ユーザーは設定で変更が可能です。<br>
グーグルクロームも段階的にブロックを進めています。<br>
どのブラウザにおいても、制限をかけていく方向です。<br>

## ◼️ドメインが同一でポートのみ異なるケースはサードパーティかどうか？
訪問しているWebサイトとは異なるドメインから発行されるものがサードパーティクッキーとなります。<br>
ドメインは同じため、ファーストパーティクッキーと思われます。（ちょっとこの問題はっきりとした情報が見つからず、自信なしです。。）<br>


## ◼️サードパーティクッキーの実装
サーバーを2つ準備。サーバー1をphp、サーバー2をexpressで実装し、サーバー2のみngrokで別ドメイン。<br>
本ブランチ内「05_problem」に関連ファイルを配置。<br>
- ファーストパーティクッキー
    first_party_cookieフォルダ内のindex.phpとそこで使っているsample-cookie.pngでページを作成。<br>
    この中でクッキーを設定しており、iframeで別サーバーから後述のサードパーティクッキーのページを表示。<br>
    ※phpのため実際にページを表示する場合はmamp内にこのファイルを配置するなど、環境準備の必要あり<br>
- サードパーティクッキー
    index.jsでexpressを起動。<br>
    publicフォルダ内のindex.htmlとthird.pngを静的ファイルとして表示。このページでサードパーティクッキーを発行している。<br>

◼️実装後の画面
## [ファーストパーティクッキー](./1st.png)
## [サードパーティクッキー](./3rd.png)

